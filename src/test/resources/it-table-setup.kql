.create-merge table TBL (vnum:int, vdec:decimal, vdate:datetime, vb:boolean, vreal:real, vstr:string, vlong:long,vtype:string,keys:dynamic,headers:dynamic,[kafkamd]:dynamic )
.alter table TBL policy streamingingestion enable
.alter table TBL policy ingestionbatching @'{"MaximumBatchingTimeSpan":"00:00:10", "MaximumNumberOfItems": 10, "MaximumRawDataSizeMB": 100}'
.create-or-alter table TBL ingestion json mapping "data_mapping" '[{"column":"vnum","datatype":"int","Properties":{"Path":"$.vnum"}},{"column":"vdate","datatype":"datetime","Properties":{"Path":"$.vdate"}},{"Column":"vdec","datatype":"decimal","Properties":{"Path":"$.vdec"}},{"column":"vb","datatype":"boolean","Properties":{"Path":"$.vb"}},{"column":"vreal","datatype":"real","Properties":{"Path":"$.vreal"}},{"column":"vstr","datatype":"string","Properties":{"Path":"$.vstr"}},{"column":"vlong","datatype":"long","Properties":{"Path":"$.vlong"}},{"column":"vtype","datatype":"string","Properties":{"Path":"$.vtype"}}]'
.create-or-alter table TBL ingestion csv mapping "csv_mapping" '[{"column":"vnum","datatype":"int","Properties":{"Ordinal":"4"}},{"column":"vdate","datatype":"datetime","Properties":{"Ordinal":"1"}},{"Column":"vdec","datatype":"decimal","Properties":{"Ordinal":"2"}},{"column":"vb","datatype":"boolean","Properties":{"Ordinal":"0"}},{"column":"vreal","datatype":"real","Properties":{"Ordinal":"5"}},{"column":"vstr","datatype":"string","Properties":{"Ordinal":"6"}},{"column":"vlong","datatype":"long","Properties":{"Ordinal":"3"}},{"column":"vtype","datatype":"string","Properties":{"ConstValue":"csv"}}]'
.create-merge table ['CABT'] (['event_id']:string, ['event_type']:string, ['business_event_type']:string, ['business_object']:dynamic, ['metadata']:dynamic, ['partition']:int, ['offset']:long, ['timestamp']:long, ['id']:dynamic, ['keys']:dynamic, ['headers']:dynamic, ['kafkamd']:dynamic, ['date']:string, ['is_priority']:bool, ['process']:string)
.create table ['CABT'] ingestion json mapping 'CABT_mapping' '[{"column":"event_type", "Properties":{"Path":"$[\'event_type\']"}},{"column":"business_event_type", "Properties":{"Path":"$[\'business_event_type\']"}},{"column":"business_object", "Properties":{"Path":"$[\'business_object\']"}},{"column":"metadata", "Properties":{"Path":"$[\'metadata\']"}},{"column":"partition", "Properties":{"Path":"$[\'partition\']"}},{"column":"timestamp", "Properties":{"Path":"$[\'timestamp\']"}},{"column":"event_id", "Properties":{"Path":"$[\'event_id\']"}},{"column":"is_priority", "Properties":{"Path":"$[\'is_priority\']"}},{"column":"process", "Properties":{"Path":"$[\'process\']"}},{"column":"offset", "Properties":{"Path":"$[\'offset\']"}},{"column":"keys", "Properties":{"Path":"$[\'keys\']"}},{"column":"headers", "Properties":{"Path":"$[\'headers\']"}},{"column":"kafkamd", "Properties":{"Path":"$[\'kafkamd\']"}}]'